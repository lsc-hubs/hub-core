<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paul van Genuchten, Thaïsa van der Woude">
<meta name="dcterms.date" content="2023-11-20">

<title>LSC Hub - core - User Guideline LSC Hubs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/index.html">LSC Hubs documentation</a></li><li class="breadcrumb-item"><a href="../../docs/user/index.html">User Guideline LSC Hubs</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">LSC Hub - core</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LSC Hubs documentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/admin/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Administration documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/user/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">User Guideline LSC Hubs</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/developer/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Developer documentation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/pycsw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">pycsw</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/terria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">terria js</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/developer/tutorial-data-management/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workshop on effective spatial data flows</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/1-existing-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Existing resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/2-describing-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Describing resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/3-catalog-publication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Catalog publication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/4-bulk-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bulk import</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/5-git-cicd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GIT and CI/CD</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/6-data-publication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data publication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/7-providing-mapservices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Providing conveniance API’s</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/8-measure-quality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quality of Service</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/developer/tutorial-data-management/9-advanced-options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extension options</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><img src="https://lsc-hubs.org/images/logo-lsc-hubs.svg" class="img-fluid"></p>
</div></div>
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">User Guideline LSC Hubs</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Paul van Genuchten, Thaïsa van der Woude </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 20, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This document is a guideline for the components of a LSC Hub.</p>
<p>A typical LSC hub consists of 3 components:</p>
<ul>
<li>A <a href="#homepage">homepage</a> providing a user welcome, project attribution and documentation;</li>
<li>A <a href="#catalogue">catalogue</a> which provides a search interface on the resources relevant to the hub;</li>
<li>A <a href="#map-viewer">map viewer</a> section for easy access to data.</li>
</ul>
<p>Moreover, there are 2 services important for the LSC hub: - Providing <a href="#feedback">feedback</a> to improve the LSC-hub - Providing <a href="#additionalinformation">Additional information</a> to enrich the LSC-hub.</p>
<section id="homepage" class="level2">
<h2 class="anchored" data-anchor-id="homepage">Homepage</h2>
<p>The entry point of the hub is a webpage with general information about the project. The LSC-hub for Rwanda can be accessed at https://lsc-hubs.org/hubs/rwanda/.</p>
<p>When arriving on the homepage, you can see 6 sections: - <strong>Data</strong> to find data in the <a href="https://rwanda.lsc-hubs.org/">catalogue</a> or go to the <a href="https://maps.lsc-hubs.org/#lsc-rwanda">mapviewer</a> - <strong>Predictive modelling</strong> to find modelling software in the <a href="https://rwanda.lsc-hubs.org/collections/metadata:main/items?type=model">hub catalogue</a>. - <strong>Policy</strong> Which <a href="https://lsc-hubs.org/hubs/rwanda/policy/">policies</a> are relevant to the hub, and can the hub support policy development? - <strong>Information Services</strong> to find <a href="https://lsc-hubs.org/hubs/rwanda/akis/">agricultural knowledge and innovation systems</a> in Rwanda - <strong>Use Cases</strong> to explore the <a href="https://lsc-hubs.org/hubs/rwanda/usecases/">use cases</a> of the LSC hub - <strong>Hub community</strong> to find other users in the <a href="https://lsc-hubs.org/hubs/rwanda/stakeholders/">stakeholder list</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/homeRwanda.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">LSC hub homepage</figcaption>
</figure>
</div>
<p><strong>Step 1:</strong> Explore the homepage of the LSC hub. Click on the links, and explore which info is in there.</p>
</section>
<section id="catalogue" class="level2">
<h2 class="anchored" data-anchor-id="catalogue">Catalogue</h2>
<p>The central catalogue contains references to all relevant resources in the hub. The catalogue of Rwanda can be reached by clicking under <em>DATA</em> on <em>Catalogue</em> or directly by https://rwanda.lsc-hubs.org/</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/catalogueRwanda.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hub catalogue</figcaption>
</figure>
</div>
<p>When you click on submit, the available records will appear.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/cataloguerecords.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hub catalogue overview</figcaption>
</figure>
</div>
<p>Resources are categorised into:</p>
<ul>
<li>Datasets</li>
<li>Software</li>
<li>Model</li>
<li>Services (Web services, APIs, SMS, phone and onsite services)</li>
</ul>
<p>The catalogue allows the filtering of keywords. The 3 main keywords are: 1. category ( <em>such as soil, crop, etc.</em>), 2. spatial scope (<em>such as Global, National, district, etc.</em> ), 3. the type (<em>such as dataset, software, etc</em>).</p>
<p>Second, any other keyword linked to the resource can be used to search in the catalogue, for example, <em>land use</em> or <em>crop yield</em>. This depends on which keywords are given to the resources.</p>
<p><strong>Step 2:</strong> Try the keywords. Type in the search bar various keywords, such as <em>soil or Land use</em> or click on the keywords on the side.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/cataloguesearch.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hub catalogue search</figcaption>
</figure>
</div>
<p>For each record, a number of metadata properties are provided, such as abstract, used datasets, keywords, usage constraints, and contact information.</p>
<p>Some records link directly to the <a href="#map-viewer">map viewer</a> component. Under the image, it will say: Open <em>record</em> in the LSC map and you will be directed to the map viewer.</p>
<p><strong>Step 3:</strong> Explore the records. Click, after searching on keywords, on one of the appeared records and explore the provided information. Click on the links in the records</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/cataloguepHrecord.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hub catalogue record</figcaption>
</figure>
</div>
</section>
<section id="map-viewer" class="level2">
<h2 class="anchored" data-anchor-id="map-viewer">Map viewer</h2>
<p>Spatial data can be viewed and compared in a web-based map viewer. The map viewer can be accessed on the homepage of the LSC hub, under <em>DATA</em> and then click on go the map viewer. The map viewer can also directly be accessed at https://maps.lsc-hubs.org/#lsc-rwanda</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/map.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hub map vizualisation</figcaption>
</figure>
</div>
<p>You can open one of the existing map contexts via the <code>related maps</code> menu. Or create a map from scratch by combining datasets found in the catalogue or from other sources.</p>
<p>A listing of available functionalities:</p>
<ul>
<li>The Sidebar
<ul>
<li><code>Explore map data</code> shows a listing of datasets that can be added to the map via a catalogue search or directly from a configured map service. If the panel is empty, select an alternative map from <code>related maps</code>.</li>
<li><code>Upload</code> provides the option to open a dataset from the local computer. Note that this data is not uploaded to a server, so this data is not shared with colleagues. You can also reference <code>web data</code> from this panel.</li>
<li>As soon as layers are loaded on the map, you can set the order of the layers, view a legend of the layer, zoom to its extent, set its opacity and view the metadata of the data.</li>
</ul></li>
<li>The vertical toolbar on the top right
<ul>
<li>Zoom in and out, and back to a full world zoom</li>
<li>Zoom to your current location</li>
<li>Split the map to the left and right, to compare 2 datasets</li>
<li>Measure a distance on the map</li>
</ul></li>
<li>The top menu
<ul>
<li>Get more information <code>about</code> the map viewer</li>
<li>Select one of a set of <code>related maps</code></li>
<li><code>Map settings</code> allows you to select a different base map</li>
<li><code>Help</code> opens the viewer documentation</li>
<li>A <code>Story</code> is a series of views on various datasets with comments</li>
<li><code>Share</code> generates a link to the current map, which you can share with colleagues</li>
</ul></li>
</ul>
</section>
<section id="feedback" class="level2">
<h2 class="anchored" data-anchor-id="feedback">Feedback</h2>
<p>Notice that every page or resource on the hub provides an option to provide feedback and/or ask a question related to the content. Contributions to the hub require a <a href="https://github.com/signup?ref_cta=Sign+up">Github login</a>.</p>
</section>
<section id="additional-information" class="level2">
<h2 class="anchored" data-anchor-id="additional-information">Additional information</h2>
<p>The stakeholders keep ownership in the LSC hub. The catalogue can be linked to various information sources, without that the data is stored on the LSC hub. Therefore, if you know existing information sources that are missing and should be added, there is a way to add the information by using an ODK form.</p>
<p>An Open Data Kit (ODK) form is a form that provides a structured way to collect and provide information. Typically forms are used by data collectors via an online link. The LSC-hub ODK form can accessed by: <a href="https://odk.isric.org/-/single/n2Sosp1gxbXLUcOelRBWsMru72DSLFb?st=pi9NCIyCBZIeYuVU0lb812NtQfOucM34dS04qF6GFaao2FB!c3DJDl10TTRTeOUJ">ODK form LSC-IS</a></p>


</section>

<footer class="bs-footer mt-5">
<a href="https://lsc-hubs.org">LSC Hubs 2023</a>
</footer></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>